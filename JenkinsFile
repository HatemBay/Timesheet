pipeline {
	environment
	{
		registry = "raefvalidation/spring"
		registryCredential= 'doockerHub'
		dockerImage = ''
	}
    agent any

    stages {
		
		stage('Deploy our image') {
			steps { 
				script { 
					echo 'Deploying image...';
					docker.withRegistry( '', registryCredential) { dockerImage.push() } 
					} 
				}
		}

		stage('Cleaning up') {
			steps { 
				echo 'Cleaning up...';
				bat "docker rmi $registry:$BUILD_NUMBER" 
			}
		}
    }
    
    
}